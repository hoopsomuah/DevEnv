# yaml-language-server: $schema=https://raw.githubusercontent.com/PowerShell/DSC/main/schemas/2023/08/config/document.json
$schema: https://raw.githubusercontent.com/PowerShell/DSC/main/schemas/2023/08/config/document.json
resources:

  # Verify min OS version requirement
  - name: Verify min OS version requirement
    type: Microsoft.Windows.Developer/OsVersion
    directives:
      module: Microsoft.Windows.Developer
      allowPrerelease: true
    properties:
      MinVersion: '10.0.22000'

  # Install GitHub Desktop
  - name: Install GitHub Desktop
    type: Microsoft.WinGet.DSC/WinGetPackage
    directives:
      module: Microsoft.WinGet.DSC
    properties:
      id: GitHub.GitHubDesktop
      source: winget

  # Install DevHome
  - name: Install Microsoft Dev Home
    type: Microsoft.WinGet.DSC/WinGetPackage
    directives:
      module: Microsoft.WinGet.DSC
    properties:
      id: Microsoft.DevHome
      source: winget

  # Install PowerToys
  - name: Install PowerToys
    type: Microsoft.WinGet.DSC/WinGetPackage
    directives:
      module: Microsoft.WinGet.DSC
    properties:
      id: Microsoft.PowerToys
      source: winget

  # Install Visual Studio 2022
  - name: Install Visual Studio 2022
    type: Microsoft.WinGet.DSC/WinGetPackage
    directives:
      module: Microsoft.WinGet.DSC
    properties:
      id: Microsoft.VisualStudio.2022.Enterprise
      source: winget

  # Install required VS workloads
  - name: Install required VS workloads
    type: Microsoft.VisualStudio.DSC/VSComponents
    directives:
      module: Microsoft.VisualStudio.DSC
    dependsOn:
      - "[resourceId('Microsoft.WinGet.DSC/WinGetPackage', 'Install Visual Studio 2022')]"
    properties:
      productId: Microsoft.VisualStudio.Product.Enterprise
      channelId: VisualStudio.17.Release
      vsconfigFile: ${WinGetConfigRoot}\.vsconfig